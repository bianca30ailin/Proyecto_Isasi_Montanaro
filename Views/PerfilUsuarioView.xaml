<UserControl x:Class="Proyecto_Isasi_Montanaro.Views.PerfilUsuarioView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Proyecto_Isasi_Montanaro.Views"
             xmlns:helper="clr-namespace:Proyecto_Isasi_Montanaro.Helpers"
             mc:Ignorable="d" 
             Background="#F3EDF7"
             d:DesignHeight="450" d:DesignWidth="800">

    <UserControl.Resources>
        <helper:InverseBoolConverter x:Key="InverseBoolConverter"/>
    </UserControl.Resources>

    <Grid>
        <ScrollViewer VerticalScrollBarVisibility="Auto"
                      HorizontalScrollBarVisibility="Disabled" Margin="0">
            <Border CornerRadius="8"
                    Background="White"
                    BorderBrush="#E5E7EB"
                    BorderThickness="1"
                    MaxWidth="550"            
                    HorizontalAlignment="Center"
                    VerticalAlignment="Top"
                    Margin="0,20,0,20">

                <Grid Margin="20,10,20,20">
                    <Grid.RowDefinitions>
                        <!-- Título -->
                        <RowDefinition Height="Auto"/>
                        <!-- Botones -->
                        <RowDefinition Height="Auto"/>
                        <!-- Formulario -->
                        <RowDefinition Height="Auto"/>
                        <!-- Botones -->
                        <RowDefinition Height="Auto"/>

                    </Grid.RowDefinitions>

                    <!-- Título -->
                    <StackPanel Grid.Row="0" Margin="0,0,0,10" Style="{StaticResource HeaderWithIcon}">
                        <Image Source="/Assets/otros/mage--edit.png" Style="{StaticResource FormHeaderIcon}"/>
                        <TextBlock Text="Datos del Usuario" Style="{StaticResource FormHeaderTitle}"/>
                    </StackPanel>

                    <Border Grid.Row="1" BorderBrush="#E5E7EB" BorderThickness="0,0,0,1" Margin="0,0,0,0"/>

                    <!-- Formulario -->
                    <Grid Grid.Row="2" Margin="20,20,20,40">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="30"/>
                            <ColumnDefinition Width="200"/>
                        </Grid.ColumnDefinitions>

                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Nombre -->
                        <TextBlock Text="Nombre" 
                                    Style="{StaticResource FormLabel}"
                                    Grid.Row="0" Grid.Column="0" />
                        <TextBox Style="{StaticResource FormTextBox}" 
                                   Text="{Binding UsuarioActual.Nombre, Mode=TwoWay}"
                                   IsReadOnly="{Binding IsEditable, Converter={StaticResource InverseBoolConverter}}"
                                  Margin="0,30,0,10"
                                  Grid.Row="0" Grid.Column="0"/>

                        <!-- Dni -->
                        <TextBlock Text="Dni" 
                                    Style="{StaticResource FormLabel}"
                                    Grid.Row="0" Grid.Column="2" />
                        <TextBox Style="{StaticResource FormTextBox}"
                                 Text="{Binding UsuarioActual.Dni, Mode=TwoWay}"
                                 IsReadOnly="{Binding IsEditable, Converter={StaticResource InverseBoolConverter}}"
                                  Margin="0,30,0,10"
                                  Grid.Row="0" Grid.Column="2"/>

                        <!-- Apellido -->
                        <TextBlock Text="Apellido" 
                                Style="{StaticResource FormLabel}" 
                                Grid.Row="1" Grid.Column="0"/>
                        <TextBox Style="{StaticResource FormTextBox}" 
                                 Text="{Binding UsuarioActual.Apellido, Mode=TwoWay}"
                                 IsReadOnly="{Binding IsEditable, Converter={StaticResource InverseBoolConverter}}"
                                  Margin="0,30,0,10"
                                  Grid.Row="1" Grid.Column="0"/>

                        <!-- Direccion -->
                        <TextBlock Text="Dirección" 
                                Style="{StaticResource FormLabel}" 
                                Grid.Row="1" Grid.Column="3"/>
                        <TextBox Style="{StaticResource FormTextBox}" 
                                  Text="{Binding UsuarioActual.Direccion, Mode=TwoWay}"
                                 IsReadOnly="{Binding IsEditable, Converter={StaticResource InverseBoolConverter}}"
                                  Margin="0,30,0,10"
                                  Grid.Row="1" Grid.Column="3"/>

                        <!-- Contraseña -->
                        <TextBlock Text="Contraseña"  
                           Style="{StaticResource FormLabel}"  
                           Grid.Row="2" Grid.Column="0"/>
                        <TextBox x:Name="txtContrasena"
                           Style="{StaticResource FormTextBox}"
                           Margin="0,30,0,10"
                           Grid.Row="2" Grid.Column="0"
                           Text="{Binding UsuarioActual.Contraseña, Mode=TwoWay}"
                           IsReadOnly="{Binding IsEditable, Converter={StaticResource InverseBoolConverter}}"/>



                        <!--Perfiles-->
                        <TextBlock Text="Perfil"  
                           Style="{StaticResource FormLabel}"  
                           Grid.Row="4" Grid.Column="0"/>
                        <ListBox x:Name="lstPerfiles"
                             Grid.Row="4"
                             Margin="10,30,102,10"
                             Background="#E0E0E0"
                             ItemsSource="{Binding PerfilesDisponibles}"
                             SelectionMode="Multiple"
                             BorderBrush="Transparent"
                             IsHitTestVisible="False">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <CheckBox Content="{Binding TipoUsuario.Tipo}"
                                      IsChecked="{Binding IsSelected, Mode=TwoWay}"
                                      Foreground="#072741"
                                      IsEnabled="False"/>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>



                        <!-- Fecha de nacimiento -->
                        <TextBlock Text="Fecha de nacimiento" 
                              Style="{StaticResource FormLabel}" 
                              Grid.Row="2" Grid.Column="3"/>
                        <DatePicker Grid.Row="2" Grid.Column="3" 
                             Style="{StaticResource FormDate}"
                            SelectedDate="{Binding UsuarioActual.FechaNacimiento, Mode=TwoWay}"
                             IsEnabled="{Binding IsEditable}"
                             Margin="0,30,0,10"/>

                        <!-- Telefono -->
                        <TextBlock Text="Telefono" 
                           Style="{StaticResource FormLabel}" 
                           Grid.Row="3" Grid.Column="3"/>
                        <TextBox Style="{StaticResource FormTextBox}" 
                         Margin="0,30,0,10"
                         Grid.Row="3" Grid.Column="3"
                         Text="{Binding UsuarioActual.Telefono, Mode=TwoWay}"
                         IsReadOnly="{Binding IsEditable, Converter={StaticResource InverseBoolConverter}}"/>

                        <!-- Correo -->
                        <TextBlock Text="Correo electronico" 
                           Style="{StaticResource FormLabel}" 
                           Grid.Row="3" Grid.Column="0"/>
                        <TextBox Style="{StaticResource FormTextBox}" 
                             Margin="0,30,0,10"
                             Grid.Row="3" Grid.Column="0"
                             Text="{Binding UsuarioActual.Email, Mode=TwoWay}"
                             IsReadOnly="{Binding IsEditable, Converter={StaticResource InverseBoolConverter}}"/>
                    </Grid>

                    <!-- Botones -->
                    <StackPanel Orientation="Horizontal" 
                         Grid.Row="3" 
                         HorizontalAlignment="Center">

                        <!-- Cancelar -->
                        <Button Style="{StaticResource BtnSecondary}" 
                             Content="Cancelar" Width="100"
                             Margin="0,0,10,0"
                             Foreground="White"
                             Background="#757575"
                             Command="{Binding CancelarCommand}"
                             />

                        <!-- Modificar -->
                        <Button Style="{StaticResource BtnPrimary}" 
                             Content="Modificar" Width="100"
                             Margin="0,0,10,0"
                             Background="#F5A623"
                             Command="{Binding ModificarCommand}"
                             />

                        <!-- Guardar -->
                        <Button Style="{StaticResource BtnPrimary}" 
                                 Content="Guardar" Width="100"
                                 Background="#53BA83"
                                Command="{Binding GuardarCommand}"
                                IsEnabled="{Binding IsEditable}"/>
                    </StackPanel>
                </Grid>
            </Border>
        </ScrollViewer>
    </Grid>
</UserControl>
