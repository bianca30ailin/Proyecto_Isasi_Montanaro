<UserControl x:Class="Proyecto_Isasi_Montanaro.Views.InformesView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Proyecto_Isasi_Montanaro.Views"
             xmlns:vm="clr-namespace:Proyecto_Isasi_Montanaro.ViewModels"
             xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800"
             d:DataContext="{d:DesignInstance vm:InformesMainViewModel}"
             Background="#F3EDF7">

    
    <Grid>
        <!-- DASHBOARD PRINCIPAL -->
        <Grid x:Name="DashboardPanel"
              Visibility="{Binding ContenidoActual, Converter={StaticResource NullToVisibilityInverseConverter}}">
            <Grid Margin="20">
                <Grid.RowDefinitions>
                    <!-- Encabezado -->
                    <RowDefinition Height="Auto"/>
                    <!-- Areas -->
                    <RowDefinition  Height="Auto"/>
                    <!-- Actividad del dia -->
                    <RowDefinition Height="Auto"/>
                    <!-- lista de reportes-->
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- FILA 0: TÍTULO -->
                <StackPanel Grid.Row="0" Style="{StaticResource HeaderWithIcon}">
                    <Image Source="/Assets/report/streamline-plump--file-report.png" Style="{StaticResource HeaderIcon}"/>
                    <TextBlock Text="Gestión de Informes" Style="{StaticResource HeaderTitle}"/>
                </StackPanel>

                <!-- FILA 2: AREAS -->
                <Border Grid.Row="1"
                    Background="White"
                    CornerRadius="10"
                    BorderBrush="#E5E7EB"
                    BorderThickness="1"
                    Padding="10"
                    Margin="0,0,0,20"
                    Effect="{StaticResource CardShadow}">

                    <StackPanel Orientation="Vertical">
                        <!-- Título -->
                        <TextBlock Text="Áreas"
                               FontWeight="SemiBold"
                               Foreground="#072741"
                               FontSize="14"
                               Margin="0,0,0,12"/>

                        <!-- Botones -->
                        <UniformGrid Columns="5" Rows="1" Margin="0,0,0,10">
                            <!-- Ventas -->
                            <Button Content="Ventas"
                                Command="{Binding IrAInformeVentasCommand}"
                                Style="{StaticResource CardButton}"
                                ToolTip="Ver informes de ventas"
                                Margin="4" />

                            <!-- Envíos -->
                            <Button Content="Envíos"
                                Command="{Binding IrAInformeEnviosCommand}"
                                Style="{StaticResource CardButton}"
                                ToolTip="Ver informes de envíos"
                                Margin="4" />

                            <!-- Inventario -->
                            <Button Content="Inventario"
                                Command="{Binding IrAInformeInventarioCommand}"
                                Style="{StaticResource CardButton}"
                                ToolTip="Ver informes de inventario"
                                Margin="4" />

                            <!-- Clientes -->
                            <Button Content="Clientes"
                                Command="{Binding IrAInformeClientesCommand}"
                                Style="{StaticResource CardButton}"
                                ToolTip="Ver informes de clientes"
                                Margin="4" />

                            <!-- Usuarios -->
                            <Button Content="Usuarios"
                                Command="{Binding IrAInformeUsuariosCommand}"
                                Style="{StaticResource CardButton}"
                                ToolTip="Ver informes de usuarios"
                                Margin="4" />
                        </UniformGrid>
                    </StackPanel>
                </Border>

                <!-- ACTIVIDAD DEL DÍA -->
                <StackPanel Grid.Row="2"
                        Margin="0,0,0,30">
                    <TextBlock Text="Actividad del día"
                           FontWeight="SemiBold"
                           Foreground="#072741"
                           FontSize="14"
                           Margin="0,0,0,8"/>

                    <UniformGrid Columns="4" Rows="1" Margin="0,0,0,20">

                        <!-- Ventas -->
                        <Border Style="{StaticResource InfoCard}">
                            <Button Background="Transparent" BorderThickness="0"
                                 Command="{Binding MostrarVentasCommand}">
                                <StackPanel HorizontalAlignment="Center">
                                    <iconPacks:PackIconMaterial Kind="CartOutline"
                                        Foreground="#53BA83"
                                        Width="26" Height="26"
                                        HorizontalAlignment="Center" />
                                    <TextBlock Text="{Binding VentasDelDia}"
                                        Foreground="Green"
                                        FontWeight="Bold"
                                        FontSize="16"
                                        HorizontalAlignment="Center"/>
                                    <TextBlock Text="nuevas ventas"
                                        FontSize="13"
                                        Foreground="#072741"
                                        HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Button>
                        </Border>

                        <!-- Envíos -->
                        <Border Style="{StaticResource InfoCard}">
                            <Button Background="Transparent" BorderThickness="0"
                                    Command="{Binding MostrarEnviosCommand}">
                                <StackPanel HorizontalAlignment="Center">
                                    <iconPacks:PackIconMaterial Kind="TruckDelivery"
                                        Foreground="#4DA3FF"
                                        Width="26" Height="26"
                                        HorizontalAlignment="Center" />
                                    <TextBlock Text="{Binding EnviosDelDia}"
                                        Foreground="Green"
                                        FontWeight="Bold"
                                        FontSize="16"
                                        HorizontalAlignment="Center"/>
                                    <TextBlock Text="envíos nuevos"
                                        FontSize="13"
                                        Foreground="#072741"
                                        HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Button>
                        </Border>

                        <!-- Devoluciones -->
                        <Border Style="{StaticResource InfoCard}">
                            <Button Background="Transparent" BorderThickness="0"
                                    Command="{Binding MostrarDevolucionesCommand}">
                                <StackPanel HorizontalAlignment="Center">
                                    <iconPacks:PackIconMaterial Kind="UndoVariant"
                                        Foreground="#F5A623"
                                        Width="26" Height="26"
                                        HorizontalAlignment="Center" />
                                    <TextBlock Text="{Binding DevolucionesDelDia}"
                                        Foreground="DarkOrange"
                                        FontWeight="Bold"
                                        FontSize="16"
                                        HorizontalAlignment="Center"/>
                                    <TextBlock Text="devoluciones"
                                        FontSize="13"
                                        Foreground="#072741"
                                        HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Button>
                        </Border>

                        <!-- Total vendido -->
                        <Border Style="{StaticResource InfoCard}">
                            <StackPanel HorizontalAlignment="Center">
                                <iconPacks:PackIconMaterial Kind="CashMultiple"
                                    Foreground="#E35802"
                                    Width="26" Height="26"
                                    HorizontalAlignment="Center" />
                                <TextBlock Text="{Binding TotalVendidoDia, StringFormat='${0:N0}'}"
                                    Foreground="#072741"
                                    FontWeight="Bold"
                                    FontSize="16"
                                    HorizontalAlignment="Center"/>
                                <TextBlock Text="total vendido"
                                    FontSize="13"
                                    Foreground="#072741"
                                    HorizontalAlignment="Center"/>
                            </StackPanel>
                        </Border>

                    </UniformGrid>

                    <!-- Tabla dinámica -->
                    <DataGrid ItemsSource="{Binding RegistrosDelDia}"
                          AutoGenerateColumns="True"
                          
                          Margin="0,10,0,0"
                          CanUserAddRows="False"
                          CanUserDeleteRows="False"
                          IsReadOnly="True"
                          AlternatingRowBackground="#F3F6FA"
                          GridLinesVisibility="None"
                          RowHeight="28"
                          FontSize="13" />
                </StackPanel>

                
            </Grid>
        </Grid>
        <ContentControl Content="{Binding ContenidoActual}"
                        Visibility="{Binding ContenidoActual, Converter={StaticResource NullToVisibilityConverter}}"
        />
     </Grid> 
</UserControl>
